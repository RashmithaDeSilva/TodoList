import{e as ne}from"./chunk-GK7KZHNC.js";import{Da as T,Ea as C,Fa as $,Ga as Y,Ha as W,Ia as f,Ja as r,K as Q,Ka as a,La as x,Ma as D,Na as g,Oa as c,Pa as ee,Qa as te,Ra as oe,Sa as z,T as w,Ta as p,U as v,Ua as V,V as I,Va as q,W as L,Wa as Z,Xa as S,_a as ie,a as M,b as B,ba as h,c as l,ma as s,qa as R,ua as j,xa as K}from"./chunk-ZP4WJJZU.js";var P=(i=>(i.ALL="ALL",i.OPEN="OPEN",i.EXPIRED="EXPIRED",i.DONE="DONE",i))(P||{});var F=class n{db=null;dbReady;resolveReady;todoCount=0;constructor(){this.dbReady=new Promise(t=>{this.resolveReady=t}),this.openDB()}openDB(){let t=indexedDB.open("TodoDB",1);t.onupgradeneeded=()=>{let e=t.result;e.objectStoreNames.contains("todos")||e.createObjectStore("todos",{keyPath:"id",autoIncrement:!0}).createIndex("dueDate","dueDate",{unique:!1})},t.onsuccess=()=>{this.db=t.result,this.resolveReady()},t.onerror=()=>{console.error("IndexedDB failed: ",t.error)}}waitForDB(){return l(this,null,function*(){if(yield this.dbReady,!this.db)throw new Error("DB not ready");return this.db})}addTodo(t){return l(this,null,function*(){return yield this.waitForDB(),new Promise((e,o)=>{if(!this.db)return o("DB not ready");let i=this.db.transaction("todos","readwrite");i.objectStore("todos").add(t),i.oncomplete=()=>e(),i.onerror=()=>o(i.error)})})}getTodos(t,e,o,i){return l(this,null,function*(){let d=yield this.waitForDB(),u=(t-1)*e,m=[];return new Promise((b,U)=>{let k=d.transaction("todos","readonly").objectStore("todos").openCursor(),_=0;k.onsuccess=se=>{let G=se.target.result;if(!G){b({todos:m,total:_,next:_>u+e,privias:t>1&&u<_});return}let X=G.value,E=B(M({},X),{createdDate:new Date(X.createdDate),dueDate:new Date(X.dueDate)}),J=new Date,A=!0;switch(o){case"OPEN":A=!E.completed&&E.dueDate>J;break;case"EXPIRED":A=!E.completed&&E.dueDate<=J;break;case"DONE":A=E.completed;break;case"ALL":default:A=!0}let le=i.trim()===""||E.title.toLowerCase().includes(i.toLowerCase());A&&le&&(_>=u&&m.length<e&&m.push(E),_++),G.continue()},k.onerror=()=>U(k.error)})})}updateTodo(t){return l(this,null,function*(){return yield this.waitForDB(),new Promise((e,o)=>{if(!this.db)return o("DB not ready");let i=this.db.transaction("todos","readwrite");i.objectStore("todos").put(B(M({},t),{createdDate:t.createdDate.toISOString(),dueDate:t.dueDate.toISOString()})),i.oncomplete=()=>e(),i.onerror=()=>o(i.error)})})}deleteTodo(t){return l(this,null,function*(){return yield this.waitForDB(),new Promise((e,o)=>{if(!this.db)return o("DB not ready");let i=this.db.transaction("todos","readwrite");i.objectStore("todos").delete(t),i.oncomplete=()=>e(),i.onerror=()=>o(i.error)})})}getTodoCount(t){return l(this,null,function*(){let e=yield this.waitForDB();return new Promise((o,i)=>{if(!e)return i("DB not ready");let m=e.transaction("todos","readonly").objectStore("todos").openCursor(),b=0;m.onsuccess=U=>{let O=U.target.result;if(!O)return o(b);let y=O.value;y.dueDate=new Date(y.dueDate);let k=new Date,_=!0;switch(t){case"OPEN":_=!y.completed&&y.dueDate>k;break;case"EXPIRED":_=!y.completed&&y.dueDate<=k;break;case"DONE":_=y.completed;break;case"ALL":default:_=!0}_&&b++,O.continue()},m.onerror=()=>i(m.error)})})}checkTodo(t,e){return l(this,null,function*(){return yield this.waitForDB(),new Promise((o,i)=>{if(!this.db)return i("DB not ready");let d=this.db.transaction("todos","readwrite"),u=d.objectStore("todos"),m=u.get(t);m.onsuccess=()=>{let b=m.result;if(!b)return i(`Todo with ID ${t} not found`);b.completed=e,u.put(b)},m.onerror=()=>i(m.error),d.oncomplete=()=>o(),d.onerror=()=>i(d.error)})})}getNewestTodo(){return l(this,null,function*(){let t=yield this.waitForDB();return new Promise((e,o)=>{let u=t.transaction("todos","readonly").objectStore("todos").openCursor(null,"prev");u.onsuccess=()=>{let m=u.result;e(m?.value)},u.onerror=()=>o(u.error)})})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var ue=(n,t)=>({"line-through bg-green-300":n,"bg-white":t}),H=(n,t)=>({"line-through":n,"bg-white":t}),pe=(n,t)=>({"text-green-500":n,"bg-white text-red-500":t}),me=(n,t)=>t.id;function he(n,t){n&1&&(r(0,"div",6)(1,"div",7),x(2,"div",8)(3,"div",9),a(),r(4,"div",10),x(5,"div",11)(6,"div",12),a(),r(7,"div",13)(8,"div",14),x(9,"div",15)(10,"div",16),a(),x(11,"div",17),a(),r(12,"div",18),x(13,"div",19)(14,"div",19)(15,"div",19),a()())}function fe(n,t){if(n&1&&Y(0,he,16,0,"div",6,$),n&2){let e=c();W(e.skelitenSize())}}function ge(n,t){if(n&1&&(r(0,"div",3),p(1),a()),n&2){let e=c();s(),q(" ",e.errorMessage()," ")}}function xe(n,t){if(n&1){let e=D();r(0,"div",20)(1,"h1",21),p(2,"Are you sure you want to delete this todo?"),a(),r(3,"div",22)(4,"button",23),g("click",function(){w(e);let i=c().$implicit,d=c();return v(d.deleteTodo(i.id))}),p(5,"Yes"),a(),r(6,"button",24),g("click",function(){w(e);let i=c(2);return v(i.isDeleteId.set(-1))}),p(7,"No"),a()()()}}function we(n,t){if(n&1){let e=D();r(0,"form",25),g("submit",function(i){w(e);let d=z(2),u=z(4),m=z(7),b=c(2);return v(b.saveEdit(i,d.value,u.value,m.value))}),x(1,"input",26,0),r(3,"textarea",27,1),p(5),a(),x(6,"input",28,2),r(8,"div",29)(9,"button",30),g("click",function(){w(e);let i=c(2);return i.isEditMode.set(!1),v(i.cancelEdit())}),p(10," Cancel "),a(),r(11,"button",31),g("click",function(){w(e);let i=c(2);return v(i.isEditMode.set(!1))}),p(12," Save "),a()()()}if(n&2){let e,o,i=c(2);s(),f("value",(e=i.editTodoData())==null?null:e.title),s(4),V((o=i.editTodoData())==null?null:o.body),s(),f("value",i.getEditDueDateValue())}}function ve(n,t){if(n&1){let e=D();r(0,"div",7)(1,"h2",32),p(2),a(),r(3,"span",33),p(4),a()(),r(5,"p",34),p(6),a(),r(7,"div",35)(8,"div",36)(9,"span",37),p(10,"Due:"),a(),r(11,"span",38),p(12),a()(),r(13,"div",37),p(14),a()(),r(15,"div",39)(16,"button",40),g("click",function(){w(e);let i=c().$implicit,d=c();return v(d.isDeleteId.set(i.id))}),I(),r(17,"svg",41),x(18,"path",42),a()(),L(),r(19,"button",43),g("click",function(){w(e);let i=c().$implicit,d=c();return d.isEditMode.set(!0),v(d.editTodo(i))}),I(),r(20,"svg",44),x(21,"path",45),a()(),L(),r(22,"input",46),g("change",function(i){w(e);let d=c().$implicit,u=c();return v(u.completedCheckbox(d.id,i))}),a()()}if(n&2){let e=c().$implicit,o=c();s(),f("ngClass",S(12,ue,e.completed,!e.completed)),s(),V(e.title),s(),f("ngClass",S(15,H,e.completed,!e.completed)),s(),V(o.formatDate(e.createdDate)),s(),f("ngClass",S(18,H,e.completed,!e.completed)),s(),q("",e.body," "),s(3),f("ngClass",S(21,H,e.completed,!e.completed)),s(2),f("ngClass",S(24,H,e.completed,!e.completed)),s(),V(o.formatDate(e.dueDate)),s(),f("ngClass",S(27,pe,e.completed,!e.completed)),s(),q("",e.completed?"Done":o.countdownMap.get(e.id)," "),s(8),f("checked",e.completed)}}function be(n,t){if(n&1&&(r(0,"div",4),T(1,xe,8,0,"div",20),T(2,we,13,3,"form")(3,ve,23,30),a()),n&2){let e,o=t.$implicit,i=c();s(),C(i.isDeleteId()===o.id?1:-1),s(),C(((e=i.editTodoData())==null?null:e.id)===o.id?2:3)}}function _e(n,t){if(n&1){let e=D();r(0,"button",49),g("click",function(){w(e);let i=c(2);return v(i.previous())}),x(1,"img",50),a()}if(n&2){let e=c(2);f("disabled",!e.previousBtn())}}function Te(n,t){if(n&1){let e=D();r(0,"button",51),g("click",function(){w(e);let i=c(2);return v(i.next())}),x(1,"img",50),a()}if(n&2){let e=c(2);f("disabled",!e.nextBtn())}}function Ce(n,t){if(n&1&&(r(0,"div",5),T(1,_e,2,1,"button",47),T(2,Te,2,1,"button",48),a()),n&2){let e=c();s(),C(e.previousBtn()?1:-1),s(),C(e.nextBtn()?2:-1)}}var N=class n{constructor(t){this.todoService=t}notify=new K;todos=h([]);isTodoExsist=h(!1);editTodoData=h(null);errorMessage=h(null);countdownMap=new Map;intervalId=h(-1);isDeleteId=h(-1);isEditMode=h(!1);filter="ALL";searchText=h("");skelitenSize=h([1,2,3]);page=h(1);showDirectionBtns=h(!1);nextBtn=h(!1);previousBtn=h(!1);ngOnInit(){return l(this,null,function*(){let t=setInterval(()=>l(this,null,function*(){yield this.loadTodos(),this.isTodoExsist.set(!0),clearInterval(t)}),1500);this.updateCountdowns(),this.intervalId.set(setInterval(()=>{this.updateCountdowns()},6e4))})}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId())}loadTodos(){return l(this,null,function*(){let t=yield this.todoService.getTodos(this.page(),10,this.filter,this.searchText());this.todos.set(t.todos),this.showDirectionBtns.set(this.page()===1&&t.next||this.page()!==1&&t.privias),this.nextBtn.set(t.next),this.previousBtn.set(t.privias),this.updateCountdowns()})}deleteTodo(t){return l(this,null,function*(){yield this.todoService.deleteTodo(t),this.todos().length===1&&this.page.set(this.page()-1>0?this.page()-1:1),yield this.loadTodos(),this.notify.emit()})}editTodo(t){this.editTodoData.set(M({},t)),this.errorMessage.set(null)}cancelEdit(){return l(this,null,function*(){this.editTodoData.set(null),yield this.loadTodos()})}saveEdit(t,e,o,i){return l(this,null,function*(){if(t.preventDefault(),!e||!i){this.errorMessage.set("Title and Due Date are required.");return}let d=new Date(i),u=new Date;if(d.getTime()<u.getTime()){this.errorMessage.set("Due date and time cannot be in the past.");return}let m=this.editTodoData();if(!m)return;let b=B(M({},m),{title:e,body:o,dueDate:d});yield this.todoService.updateTodo(b),this.editTodoData.set(null),this.errorMessage.set(null),yield this.loadTodos()})}formatDate(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}`}updateCountdowns(){this.countdownMap.clear();for(let t of this.todos())t.completed||this.countdownMap.set(t.id,this.calculateCountdown(t.dueDate))}calculateCountdown(t){let e=new Date,o=new Date(t).getTime()-e.getTime();if(o<=0)return"Expired";let i=Math.floor(o/(1e3*60*60*24)),d=Math.floor(o/(1e3*60*60)%24),u=Math.floor(o/(1e3*60)%60);return`${i}d ${d}h ${u}m`}completedCheckbox(t,e){return l(this,null,function*(){let o=e.target.checked;yield this.todoService.checkTodo(t,o),yield this.loadTodos(),this.notify.emit()})}getEditDueDateValue(){let t=this.editTodoData()?.dueDate??new Date,e=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),d=String(t.getHours()).padStart(2,"0"),u=String(t.getMinutes()).padStart(2,"0");return`${e}-${o}-${i}T${d}:${u}`}next(){return l(this,null,function*(){this.page.set(this.page()+1),yield this.loadTodos(),window.scrollTo({top:0,behavior:"smooth"})})}previous(){return l(this,null,function*(){this.page.set(this.page()-1),yield this.loadTodos(),window.scrollTo({top:0,behavior:"smooth"})})}static \u0275fac=function(e){return new(e||n)(R(F))};static \u0275cmp=j({type:n,selectors:[["app-todo"]],outputs:{notify:"notify"},decls:5,vars:3,consts:[["titleInput",""],["bodyInput",""],["dueInput",""],[1,"bg-red-100","text-red-700","px-4","py-3","rounded","max-w-2xl","w-full","text-center","font-semibold"],[1,"w-full","max-w-2xl","bg-white","border","border-gray-200","rounded-2xl","shadow-lg","p-5","relative","overflow-hidden"],[1,"w-full","max-w-2xl","h-md","flex","justify-center","items-center","gap-6"],[1,"w-full","max-w-2xl","animate-pulse","space-y-4","p-5","border","border-gray-200","bg-white","rounded-2xl","shadow-md","relative","overflow-hidden"],[1,"flex","justify-between","items-start","mb-2"],[1,"h-6","bg-gray-300","rounded","w-1/2"],[1,"h-4","bg-gray-300","rounded","w-1/4"],[1,"space-y-2"],[1,"h-4","bg-gray-300","rounded","w-full"],[1,"h-4","bg-gray-300","rounded","w-5/6"],[1,"flex","justify-between","items-center","text-sm","text-gray-600","mb-4","mt-4"],[1,"flex","gap-2","items-center"],[1,"h-4","bg-gray-300","rounded","w-12"],[1,"h-4","bg-gray-300","rounded","w-20"],[1,"h-4","bg-gray-300","rounded","w-16"],[1,"flex","md:justify-end","justify-start","gap-4"],[1,"h-5","w-5","bg-gray-300","rounded-full"],[1,"absolute","inset-0","backdrop-blur-xs","bg-white/70","flex","flex-col","justify-center","items-center","gap-6","p-6","rounded-2xl","z-20"],[1,"text-xl","font-semibold"],[1,"flex","justify-center","items-center","gap-4"],[1,"cursor-pointer","px-4","py-2","bg-red-500","text-white","rounded-lg","shadow",3,"click"],[1,"cursor-pointer","px-4","py-2","bg-green-400","text-black","rounded-lg","shadow",3,"click"],[3,"submit"],["placeholder","Title","required","",1,"w-full","border","border-gray-300","rounded","p-2","mb-3",3,"value"],["placeholder","Details",1,"w-full","border","border-gray-300","rounded","p-2","mb-3"],["type","datetime-local","required","",1,"w-full","border","border-gray-300","rounded","p-2","mb-3",3,"value"],[1,"flex","justify-end","gap-3"],["type","button",1,"text-gray-600","hover:underline",3,"click"],["type","submit",1,"bg-green-500","text-white","px-4","py-2","rounded","hover:bg-green-700",3,"click"],[1,"text-lg","font-bold","text-gray-800",3,"ngClass"],[1,"line-through","text-sm","text-gray-500",3,"ngClass"],[1,"text-gray-700","mb-3","whitespace-pre-line",3,"ngClass"],[1,"flex","justify-between","items-center","text-sm","text-gray-600","mb-4"],[1,"flex","gap-2"],[1,"font-semibold",3,"ngClass"],[3,"ngClass"],[1,"flex","md:justify-end","gap-4","justify-start"],["title","Delete",1,"cursor-pointer","relative","z-10",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 448 512"],["fill","#e53838","d","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"],["title","Edit",1,"cursor-pointer","relative","z-10",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","viewBox","0 0 512 512"],["fill","#e8c030","d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"],["type","checkbox",1,"cursor-pointer","relative","z-10","size-5","bg-indigo-500","rounded-full",3,"change","checked"],[1,"cursor-pointer","rotate-180",3,"disabled"],[1,"cursor-pointer",3,"disabled"],[1,"cursor-pointer","rotate-180",3,"click","disabled"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEZklEQVR4nO1az48URRQuggoGo6KgxpMejUb9D7ypRPFXMoed7XmvamYZjcngRrjCelZPJiT+HRpi1IghUQOCiMa4gHISPRjk5gpR85mvumrouDPLTE91T0P4kk5mt7qr69X7Ue99r425iRsUvR7uUcVLTvGOExy2gjNOcckproTrkhOscoz32A5ebLex3TQBqtiqio4TfGIF/zoFprz+sYqPnSAbDLCldgFaLdzuFPus4re4KCu4bBVHnOIANdPr4BHueL+PW3nxN/8XtHbQCT7nM4Xnf7UdvMnNqUWIruI5Kzg/XIDihBUs9fu4a9q5VHG3KvY4xcmCln52gl2VmpFTvD98oeCbruDphPM/6wTfFgQ6lFw7qniACw8m8KcqBq0WNldgsput4A2nWIva7vVwf5LJlzI87NWda2G1m+ExUzFE8LhTnA3C/MQ1zDShc9gZJ3SCr/sL2GFqQruN7U7wRbCC87SK8j4RzUnxVZZhm6kZWYZtVnEsmlkpnxk6tmCVh52ZEzod3Du0CsWhqUNsdOw6fGJCn1njmhjdJj7s4jnB6GQaAqdYjs4/kYlZwf54TpQNsVZxygm+L+2gI7DyFG6xgtPBxJbNRqCkMe2Y5bCziu+if6UUxgl2BUEubJibMXmLESLBAbqaXhhsGkZSi/bY26zi0+DkS7O+Mstwn1P8EHbwbLeLB2edk7CCV8MGfWRGgSHWp9WCy2USwLo00+ZBqbhiFX+PXKcTvBxe+JlJiCo0YxVHg3ntXj8oeDe87IBJjNSacYq3ggu8vX4wL0EZrV4wFSClZtxV6/lg1OA5DrKKMxUhlWZE8GjQyJl1g1bwhxek4rwqhWb6C9gRBPl93WBgOtBq4TZTMYqa4eE57fODAbZEnqA5gghOJxXE1mRaLF2jadHGy5iWywu+MaZ1ozi7C+GXDKBpqCYirMUrY8Nv4UA8aK7nA1FzBpBR5IhpqCb+n6K4Dp43Y5IxnzSSATQNTRp7eXLrk8bFRdw58iZPKOcl7p4maoLoKl4LG3PYjENXsRj85KRpaGFlWUbn8y5stICtZMVD9HqmaaVuN7I7il+u2YYgtR9uPjUD+XCchHRy8kHDBin2Tsq6e66XhLJpCGzYYCaaEzeFCmzFGskxM2eo4kkn+KsUu0N6Mu4AacvKVnmtdTjsJCkXfO69qScIHNeJ4C/H5kFiv97CHd7f8jUcL91n9LuRd2d9W4F/m5rQ48En+DK242Zu+LDJMlQtWXGHJ0wNPmGvmtM5VTyUZGLuRjSzwIovMxyaxFhhiGV0Co5Nc2JpnPQlISzHAOAru3TdV2zy3WIdnhPesSvtvbM/UTA1z9qTxizzFQP9gLnTMO3Q3JRSdosn0Q77FRcK7WRmpEetYIW8E6s4hm1yALz4m00jFkW8J6TinieIaYdT7J3LFxB8KVlxEsosAab9hIOpuK9MBQtzEWAUSCiTi2XVZhUfhuz3YuGjmotW8SPLU3+Pxe6x9cRNmOsf/wEozwm2Ft8w4gAAAABJRU5ErkJggg==","alt","circled-chevron-right--v1"],[1,"cursor-pointer",3,"click","disabled"]],template:function(e,o){e&1&&(T(0,fe,2,0),T(1,ge,2,1,"div",3),Y(2,be,4,2,"div",4,me),T(4,Ce,3,2,"div",5)),e&2&&(C(o.isTodoExsist()?-1:0),s(),C(o.errorMessage()?1:-1),s(),W(o.todos()),s(2),C(o.showDirectionBtns()?4:-1))},dependencies:[ne],encapsulation:2})};function ye(n,t){if(n&1){let e=D();r(0,"button",15),g("click",function(){w(e);let i=c();return v(i.handleAddTodo(i.child))}),I(),r(1,"svg",16)(2,"g",17)(3,"g",18),x(4,"path",19),a()()()()}}var de=class n{constructor(t){this.todoService=t}child;todoCount=h(0);isEditModeFromChild=h(!1);Filters=P;filter="ALL";searchText=h("");ngOnInit(){return l(this,null,function*(){yield this.loadTodoCount(),this.isEditModeFromChild=ie(()=>this.child?.isEditMode?.()??!1)})}loadTodoCount(){return l(this,null,function*(){let t=yield this.todoService.getTodoCount(this.filter);this.todoCount.set(t)})}addTodo(){return l(this,null,function*(){let t={title:"New Task",body:"This is a task detail",completed:!1,createdDate:new Date,dueDate:new Date(Date.now()+864e5)};yield this.todoService.addTodo(t),yield this.loadTodoCount()})}onChildNotify(){return l(this,null,function*(){yield this.loadTodoCount()})}handleAddTodo(t){return l(this,null,function*(){if(this.child.isTodoExsist()){yield this.addTodo();let e=yield this.todoService.getNewestTodo();if(e){let o=yield this.todoService.getTodos(1,10,this.filter,this.searchText());(this.filter==="ALL"||this.filter==="OPEN")&&o.todos.pop(),o.todos.unshift(e),t.todos.set(o.todos),t.editTodo(e)}window.scrollTo({top:0,behavior:"smooth"})}})}onFilterChange(t){return l(this,null,function*(){t=t.target.value,this.filter=t,this.child.filter=t,yield this.loadTodoCount(),this.child.page.set(1),yield this.child.loadTodos(),window.scrollTo({top:0,behavior:"smooth"})})}getTitle(){switch(this.filter){case"DONE":return"Done Todos";case"OPEN":return"Open Todos";case"EXPIRED":return"Expired Todos";default:return"All Todos"}}search(t){return l(this,null,function*(){this.searchText.set(t),this.child.searchText.set(t),this.child.page.set(1),yield this.child.loadTodos(),window.scrollTo({top:0,behavior:"smooth"})})}static \u0275fac=function(e){return new(e||n)(R(F))};static \u0275cmp=j({type:n,selectors:[["app-home"]],viewQuery:function(e,o){if(e&1&&ee(N,5),e&2){let i;te(i=oe())&&(o.child=i.first)}},decls:25,vars:10,consts:[[1,"h-full","w-full","flex","flex-col","items-center","gap-y-10","p-4","sm:p-6","md:p-10"],[1,"w-full","max-w-2xl","flex","flex-col","justify-center","items-center","gap-4"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","gap-4"],[1,"sm:hidden","text-xl","sm:text-2xl","text-indigo-600","font-bold"],["value","All Todos",1,"border","border-gray-300","rounded-xl","px-6","pl-10","py-2","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500",3,"change"],[3,"value"],[1,"hidden","sm:inline-block","text-xl","sm:text-2xl","text-indigo-600","font-bold"],[1,"cursor-pointer","hidden","md:inline-block","bg-indigo-500","text-white","font-semibold","py-2","px-6","rounded-lg","hover:bg-indigo-700","transition-all","duration-300",3,"click"],[1,"md:hidden","bg-indigo-500","text-white","font-bold","py-5","px-5","rounded-full","hover:bg-indigo-700","transition-all","duration-300","fixed","right-12","bottom-15","z-50"],[1,"w-full","flex","justify-center","items-center"],[1,"relative","w-full"],["type","text","placeholder","Search...",1,"w-full","px-4","py-2","pl-10","text-sm","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500",3,"input","value"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z"],[1,"w-full","flex","flex-col","items-center","justify-center","gap-8",3,"notify"],[1,"md:hidden","bg-indigo-500","text-white","font-bold","py-5","px-5","rounded-full","hover:bg-indigo-700","transition-all","duration-300","fixed","right-12","bottom-15","z-50",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","24","height","24","viewBox","0,0,256,256"],["fill","#ffffff","fill-rule","evenodd","stroke","none","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","10","stroke-dasharray","","stroke-dashoffset","0","font-family","none","font-weight","none","font-size","none","text-anchor","none",2,"mix-blend-mode","normal"],["transform","scale(10.66667,10.66667)"],["d","M11,2v9h-9v2h9v9h2v-9h9v-2h-9v-9z"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),p(4),a(),r(5,"select",4),g("change",function(d){return o.onFilterChange(d)}),r(6,"option",5),p(7,"All"),a(),r(8,"option",5),p(9,"Open"),a(),r(10,"option",5),p(11,"Expired"),a(),r(12,"option",5),p(13,"Done"),a()(),r(14,"h4",6),p(15),a(),r(16,"button",7),g("click",function(){return o.handleAddTodo(o.child)}),p(17," Add Todo "),a(),T(18,ye,5,0,"button",8),a(),r(19,"div",9)(20,"div",10)(21,"input",11),g("input",function(d){return o.search(d.target.value)}),a(),I(),r(22,"svg",12),x(23,"path",13),a()()()(),L(),r(24,"app-todo",14),g("notify",function(){return o.onChildNotify()}),a()()),e&2&&(s(4),Z(" ",o.getTitle()," (",o.todoCount(),") "),s(2),f("value",o.Filters.ALL),s(2),f("value",o.Filters.OPEN),s(2),f("value",o.Filters.EXPIRED),s(2),f("value",o.Filters.DONE),s(3),Z(" ",o.getTitle()," (",o.todoCount(),") "),s(3),C(o.isEditModeFromChild()?-1:18),s(3),f("value",o.searchText()))},dependencies:[N],encapsulation:2})};export{de as Home};
